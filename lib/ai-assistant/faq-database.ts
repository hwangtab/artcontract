import { FAQItem } from '@/types/ai-assistant';

export const faqDatabase: FAQItem[] = [
  {
    id: 'faq_001',
    question: ['계약서가 왜 필요한가요', '계약서 꼭 써야 하나요', '계약서 없이 일하면'],
    answer: '계약서는 여러분을 보호하는 가장 기본적인 방법이에요. 금액, 작업 범위, 기한 등을 명확히 해서 나중에 "그런 적 없다"는 말을 들을 일이 없게 해줘요.',
    keywords: ['계약서', '필요성', '중요성', '보호'],
    category: '기본',
    examples: ['말로만 약속했다가 돈을 못 받은 경우', '무한 수정 요구를 받은 경우'],
  },
  {
    id: 'faq_002',
    question: ['금액은 어떻게 정하나요', '가격 책정', '얼마 받아야', '시세가 궁금'],
    answer: '작업의 복잡도, 소요 시간, 사용 범위에 따라 달라져요. 비슷한 작업의 시장 가격을 참고하되, 여러분의 경력과 퀄리티를 고려해서 정하세요. AI가 추천 금액을 알려드릴게요!',
    keywords: ['금액', '가격', '시세', '책정'],
    category: '금액',
    relatedQuestions: ['계약금은 얼마나 받아야 하나요'],
  },
  {
    id: 'faq_003',
    question: ['계약금은 얼마나', '선금', '착수금', '계약금 비율'],
    answer: '보통 총 금액의 30-50%를 계약금으로 받아요. 이건 작업 시작 전에 받아야 해서, 작업을 중간에 취소당해도 최소한의 보상을 받을 수 있어요.',
    keywords: ['계약금', '선금', '착수금', '비율'],
    category: '금액',
    examples: ['50만원 작업이면 15-25만원 먼저 받기'],
  },
  {
    id: 'faq_004',
    question: ['수정은 몇 번', '수정 횟수', '리비전'],
    answer: '보통 2-3회가 적당해요. 너무 많으면 무한 수정에 시달리고, 너무 적으면 클라이언트가 부담스러워해요. 추가 수정은 회당 별도 비용을 받는 걸 추천해요!',
    keywords: ['수정', '리비전', '횟수'],
    category: '작업 조건',
    examples: ['3회 무료 수정, 이후 회당 10만원'],
  },
  {
    id: 'faq_005',
    question: ['무한 수정', '수정 무제한', '계속 고쳐달래요'],
    answer: '무한 수정은 절대 안 돼요! 🚨 클라이언트가 계속 수정을 요구해서 여러분의 시간과 에너지가 다 소진될 수 있어요. 반드시 횟수 제한을 두세요.',
    keywords: ['무한', '수정', '제한'],
    category: '위험',
  },
  {
    id: 'faq_006',
    question: ['기한', '마감일', '작업 기간', '언제까지'],
    answer: '충분한 작업 시간을 확보하세요. 너무 촉박하면 러시 비용(20-50% 추가)을 받는 게 좋아요. 예상보다 여유있게 잡는 게 안전해요.',
    keywords: ['기한', '마감', '기간'],
    category: '작업 조건',
  },
  {
    id: 'faq_007',
    question: ['저작권', '작품 소유권', '누구 거'],
    answer: '저작권은 기본적으로 여러분(창작자)에게 있어요. 클라이언트는 계약서에 명시된 범위 내에서만 사용할 수 있어요. 저작권 양도는 신중하게 결정하세요!',
    keywords: ['저작권', '소유권', '권리'],
    category: '권리',
  },
  {
    id: 'faq_008',
    question: ['상업적 사용', '광고', '판매용'],
    answer: '상업적 사용(광고, 판매, 수익 창출)은 개인 사용보다 비용이 훨씬 높아야 해요. 사용 범위를 명확히 정하고, 범위 외 사용 시 추가 비용을 받으세요.',
    keywords: ['상업', '광고', '사용'],
    category: '권리',
  },
  {
    id: 'faq_009',
    question: ['계약서 수정', '내용 바꾸고 싶어요', '잘못 썼어요'],
    answer: '계약 전이면 얼마든지 수정할 수 있어요. 계약 후에는 양측이 합의하면 수정 가능해요. 반드시 서면(문자, 이메일 등)으로 합의 내용을 남기세요!',
    keywords: ['수정', '변경', '계약서'],
    category: '기본',
  },
  {
    id: 'faq_010',
    question: ['클라이언트가 거부', '계약서 싫대요', '안 쓴대요'],
    answer: '계약서를 거부하는 클라이언트는 위험해요. 정중하지만 단호하게 "안전한 거래를 위해 계약서가 필수예요"라고 말씀드리세요. 그래도 거부하면 일을 안 하는 게 나아요.',
    keywords: ['거부', '싫어해요', '필요없대요'],
    category: '위험',
  },
  {
    id: 'faq_011',
    question: ['돈 못 받으면', '미지급', '대금 안 줘요'],
    answer: '계약서가 있으면 법적으로 대응할 수 있어요. 계약금을 받았다면 최소한의 손해는 막을 수 있고요. 독촉 문자/이메일을 보내고, 그래도 안 되면 소액 소송을 고려하세요.',
    keywords: ['미지급', '돈', '안 줘요'],
    category: '위험',
  },
  {
    id: 'faq_012',
    question: ['중간에 취소', '작업 취소', '그만하래요'],
    answer: '계약서에 취소 조항을 넣으세요. 보통 "작업 진행 단계에 따라 일정 비율의 위약금 지급" 이런 식으로요. 이미 투입한 시간과 노력은 보상받아야 해요!',
    keywords: ['취소', '중단', '위약금'],
    category: '작업 조건',
  },
  {
    id: 'faq_013',
    question: ['친구', '지인', '아는 사람'],
    answer: '친구나 지인과도 계약서는 필수예요! 오히려 아는 사이일수록 나중에 관계가 나빠질 수 있어요. "서로 기억을 정확히 하기 위해"라고 말하면 돼요.',
    keywords: ['친구', '지인', '아는 사이'],
    category: '기본',
  },
  {
    id: 'faq_014',
    question: ['소액', '작은 금액', '10만원'],
    answer: '금액이 작아도 계약서는 쓰는 게 좋아요. 간단하게라도 작성하면 서로 책임감이 생겨요. 5분이면 되니까 꼭 하세요!',
    keywords: ['소액', '작은', '적은'],
    category: '기본',
  },
  {
    id: 'faq_015',
    question: ['대기업', '큰 회사', '기업 클라이언트'],
    answer: '대기업은 보통 자체 계약서를 갖고 있어요. 받아서 꼭 읽어보시고, 불리한 조항(무한 수정, 저작권 완전 양도 등)이 있으면 수정 요청하세요. 전문가 검토를 추천해요.',
    keywords: ['대기업', '기업', '회사'],
    category: '클라이언트',
  },
  {
    id: 'faq_016',
    question: ['해외', '외국', '해외 클라이언트'],
    answer: '해외 클라이언트는 계약서와 결제가 더 중요해요. 영문 계약서가 필요하고, PayPal이나 Wise 같은 안전한 결제 수단을 사용하세요. 시차와 환율도 고려하세요.',
    keywords: ['해외', '외국', '국제'],
    category: '클라이언트',
  },
  {
    id: 'faq_017',
    question: ['포트폴리오', '작품 사용', '내 사이트에'],
    answer: '여러분의 포트폴리오 사용권은 반드시 계약서에 포함하세요! "을은 본 작업을 포트폴리오로 사용할 수 있다" 이런 조항이요. 클라이언트가 거부하면 그만큼 비용을 더 받으세요.',
    keywords: ['포트폴리오', '전시', '사용'],
    category: '권리',
  },
  {
    id: 'faq_018',
    question: ['2차 저작물', '수정해서 사용', '변형'],
    answer: '클라이언트가 여러분의 작품을 수정해서 사용하는 건 2차 저작물이에요. 이것도 명확히 허용 여부를 정해야 해요. 보통은 금지하거나, 추가 비용을 받아요.',
    keywords: ['2차', '수정', '변형', '파생'],
    category: '권리',
  },
  {
    id: 'faq_019',
    question: ['계약서 양식', '어디서 받죠', '샘플'],
    answer: '바로 여기 ArtContract에서 무료로 만들 수 있어요! 😊 여러분의 상황에 맞는 계약서를 AI가 도와드려요. 5분이면 완성돼요!',
    keywords: ['양식', '샘플', '템플릿'],
    category: '기본',
  },
  {
    id: 'faq_020',
    question: ['법적 효력', '유효한가요', '법원에서'],
    answer: '양측이 서명하면 법적 효력이 있어요. 공증을 받으면 더 강력하지만, 필수는 아니에요. 카카오톡이나 이메일로 합의한 것도 증거가 될 수 있어요.',
    keywords: ['법적', '효력', '유효'],
    category: '법률',
  },
];

export function getFAQResponse(userMessage: string, currentStep?: number): FAQItem | null {
  const lowerMessage = userMessage.toLowerCase();

  // 질문 매칭
  for (const faq of faqDatabase) {
    for (const question of faq.question) {
      if (lowerMessage.includes(question.toLowerCase())) {
        return faq;
      }
    }

    // 키워드 매칭
    for (const keyword of faq.keywords) {
      if (lowerMessage.includes(keyword.toLowerCase())) {
        return faq;
      }
    }
  }

  return null;
}

export function getQuickQuestions(step: number): string[] {
  const quickQuestions: { [key: number]: string[] } = {
    1: ['어떤 분야를 선택해야 하나요?', '여러 분야를 하는데요?'],
    2: ['작업 내용을 어떻게 설명하죠?', '구체적으로 써야 하나요?'],
    3: ['클라이언트 정보가 왜 필요한가요?', '개인 클라이언트랑 회사 차이는?'],
    4: ['기한은 어떻게 정하나요?', '촉박한 일정이면?'],
    5: ['금액은 어떻게 정하죠?', '계약금은 얼마나 받아야 하나요?', '시세가 궁금해요'],
    6: ['수정은 몇 번이 적당해요?', '무한 수정은 안 되나요?'],
    7: ['상업적 사용이 뭔가요?', '사용 범위는 어떻게 정하죠?'],
    8: ['계약서를 어떻게 전달하나요?', '수정이 필요한데요?'],
  };

  return quickQuestions[step] || ['계약서가 왜 필요한가요?', '금액은 어떻게 정하나요?'];
}
